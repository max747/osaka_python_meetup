# Next step of boot camp

ハンズオン形式で実際に手を動かしながら、標準ライブラリの使い方について学びます。
urllib, os, zipfile, csv, json などの標準ライブラリを使います。


## お題: 郵便番号データをダウンロードして JSON 形式に変換し出力する

郵便局の Web ページから郵便番号データをダウンロードし、
中身の csv ファイルを JSON 形式に変換して出力するプログラムを書きましょう。

http://www.post.japanpost.jp/zipcode/download.html


### プログラムの仕様

郵便局の Web ページから郵便番号データをダウンロードし、所定の位置に配置する。
ダウンロードした zip は展開して中身を取り出す。

JSON には以下の内容が含まれていること。

- 郵便番号
- 住所（よみ）
- 住所


### 実装

#### Step 1. 郵便番号データをダウンロードして保存する

郵便番号データをダウンロードして保存するプログラムを書きましょう。

ヒント: urllib.request を使用します。


#### Step 2. zip ファイルを展開する

zip ファイルを展開するプログラムを書きましょう。
Step 1 と同じファイルに書いてかまいません。

ヒント: zipfile.ZipFile を使用します。


#### Step 3. csv ファイルを読み込む

csv ファイルを読み込むプログラムを書きましょう。
Python スクリプトファイルは分けてもかまいません。(分けたほうがいいかもしれません。)

ヒント:

- open 関数 と csv モジュールを使用します。
- ファイルの文字コードに注意しましょう。
  - 郵便番号データファイルには、文字コード cp932 が使われています。


#### Step 4. JSON 形式で出力する

読み込んだ csv ファイルから JSON データを作り、出力しましょう。

ヒント:

- json モジュールを使用します。
- JSON にする予定の値を辞書に保存しておくと、後に JSON にするときに便利です。
- 出力先は標準出力にしておくと、後で応用が利きます。
  - リダイレクトで出力先をファイルに変更したり、パイプで後続のプログラムの入力にしたりできます。


### 発展 (余力がある人向け)

記述したプログラムに仕様変更が発生しました。対応してください。

#### 1) ダウンロードしたファイルの保存先を変更する

- プログラム実行時点の日付でディレクトリを作り、そこに zip を保存する。
  - 日付を得るには datetime モジュールを使用します。
  - ディレクトリを作るには os モジュールを使用します。
- 最新のダウンロードデータは latest ディレクトリにも保存する。
- csv ファイルは latest ディレクトリにあるものを読み込む。

この変更の意図は、過去にダウンロードしたファイルの履歴を残すことです。

#### 2) 半角を全角に変換する

- 半角カナで書かれている住所（よみ）の情報を、全角に置き換える。
  - 半角カナを全角カナに置き換えるには unicodedata モジュールを使用します。

この変更の意図は、JSON を受け取る側の読みやすさへの配慮です。


### レビュー

他のハンズオン参加者の実装と見比べてみましょう。
自分の書いたコードに改善点がないか探してみましょう。
